---
emoji: 🌐
title: ICMP
date: '2023-04-24 00:00:00'
author: 최민석
tags: Network, ICMP
categories: ComputerNetwork
---
## ICMP

ICMP (Internet Control Message Protocol)는 네트워크에서 오류 메시지와 제어 메시지를 전송하기 위해 사용되는 프로토콜입니다. ICMP는 주로 IP 네트워크에서 작동하며, IP 패킷 전송과 관련된 문제를 감지하고 보고하는 데 사용됩니다.

ICMP 메시지는 IP 패킷의 헤더와 함께 전송되며, 네트워크 장비 또는 호스트 간의 통신 문제를 식별하고 해결하는 데 도움을 줍니다. 몇 가지 일반적인 ICMP 메시지 유형은 다음과 같습니다.

1. 에코 요청 및 에코 응답 (Echo Request and Echo Reply): 네트워크 상에서 호스트 간의 접근성을 확인하기 위해 사용됩니다. 예를 들어, "핑" 명령어는 ICMP 에코 요청과 응답을 사용하여 호스트의 응답 시간과 접근 가능성을 확인합니다.
2. 목적지 도달 불가 (Destination Unreachable): 목적지로의 패킷 전달이 불가능한 경우에 보내지는 오류 메시지입니다. 예를 들어, 목적지 호스트가 연결되어 있지 않거나 서비스를 사용할 수 없는 경우에 목적지 도달 불가 메시지가 생성됩니다.
3. 시간 초과 (Time Exceeded): 패킷이 네트워크에서 너무 오랫동안 전달되는 경우 생성되는 메시지입니다. 이는 패킷이 무한 루프에 빠지거나 경로에서 장애가 발생한 경우에 발생할 수 있습니다.
4. 리다이렉션 (Redirection): 라우터가 호스트에게 전송하는 메시지로, 다른 경로를 통해 패킷을 전달하도록 요청합니다. 이는 라우팅 경로를 최적화하거나 네트워크 트래픽을 효율적으로 관리하기 위해 사용됩니다.

ICMP는 네트워크의 문제를 식별하고 디버깅하는 데 유용한 도구입니다. 네트워크 관리자는 ICMP 메시지를 분석하여 네트워크 상태를 모니터링하고 문제를 해결할 수 있습니다. 또한 ICMP는 인터넷 프로토콜 스택의 일부이므로 IP 통신과 함께 사용되어 네트워크 통신의 안정성과 신뢰성을 높이는 데 기여합니다.

## Traceroute와 ICMP

Traceroute는 소스(Source)가 목적지(Destination)로 가는 동안 일련의 UDP 세그먼트를 보내는 기법입니다. 이때 첫 번째 세트는 TTL(Time-to-Live) 값이 1로 설정되고, 두 번째 세트는 TTL 값이 2로 설정되며, 이런 식으로 계속 증가합니다. 또한, 사용되는 포트 번호는 일반적으로 사용하지 않는 번호입니다.

n번째 세트의 데이터그램이 n번째 라우터에 도달하면 라우터는 데이터그램을 폐기하고 소스로 ICMP 메시지(유형 11, 코드 0)를 전송합니다. 이 ICMP 메시지에는 라우터의 이름과 IP 주소가 포함됩니다. ICMP 메시지가 도착하면 소스는 RTT(라운드트립 시간)를 기록합니다.

Traceroute의 중지 기준은 다음과 같습니다:

- UDP 세그먼트가 최종적으로 목적지 호스트에 도착하는 경우
- 목적지가 ICMP "port unreachable" 메시지(유형 3, 코드 3)를 반환하는 경우

이러한 방식으로 Traceroute는 네트워크 경로 상의 각 라우터를 추적하고, ICMP 메시지를 통해 라우터의 이름과 IP 주소를 확인하여 네트워크 연결 상태를 파악할 수 있습니다. 이를 통해 네트워크의 라우팅 경로와 지연 시간(RTT)을 추정하는 데 도움을 줍니다.

```toc
```
